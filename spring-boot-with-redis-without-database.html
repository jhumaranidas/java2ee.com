<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Spring Boot Redis Without Database</title>
        <meta charset=utf-8>
        <meta name="theme-color" content="#f10d0d">
        <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">  
        <meta name="keywords" content="Spring Boot Redis Without Database">          
        <meta name="description" content="Spring Boot Redis Without Database. In this tutorial you will see the example about how to integrate Redis with Spring Boot without database. Redis is an open source and Java based library, it is used to cache data to increase the performance. It is lightweight and Flexible, we can easyly integrate in the application.">

        <link rel="canonical" href="https://java2ee.com/spring-boot-with-redis-without-database">

        <meta name="facebook-domain-verification" content="zpxne6s7q0awh58npjx0c9jd1mooi9">
        <meta property="article:publisher" content="https://www.facebook.com/java2eesite">
        <meta name="google-site-verification" content="bc7PlPPbYWCTlleru4zAklCrhDt9wLPJ4cpHiFREhuQ">
        <!--<meta name="google-adsense-account" content="ca-pub-1973149732345742">--> 

        <link rel="icon" type="image/x-icon" href="image/fevicon/favicon-16x16.png" />
        <link rel="apple-touch-icon" sizes="180x180" href="image/fevicon/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="image/fevicon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="image/fevicon/favicon-16x16.png">
        <link rel="manifest" href="image/fevicon/site.webmanifest">
        <link rel="mask-icon" href="image/fevicon/safari-pinned-tab.svg" color="#5bbad5">    
        <link rel="shortcut icon" sizes="16x16" href="image/fevicon/favicon-16x16.png" type=image/x-icon>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Volkhov:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
        <link href="css/styles.css" rel="stylesheet" />
        <link href="css/kafka-custom.css" rel="stylesheet" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
        
        <meta property="og:locale" content="en_US">
        <meta property="og:type" content="article">
        <meta property="og:title" content="Spring Boot Redis Without Database">
        <meta property="og:url" content="https://java2ee.com/spring-boot-with-redis-without-database">
        <meta property="og:site_name" content="java2ee - Spring Boot Redis Without Database">
        <meta property="article:section" content="Spring Boot Redis Without Database">
        <meta property="article:tag" content="Spring">
        <meta property="article:tag" content="Boot">
        <meta property="article:tag" content="Redis">
        <meta property="article:tag" content="Without">
        <meta property="article:tag" content="Database">
     
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@DasJhum9">
        <meta name="twitter:creator" content="@DasJhum9">
        <meta name="twitter:domain" content="www.java2ee.com">
        <meta name="twitter:title" property="og:title" content="Spring Boot Redis Without database">
        <meta name="twitter:image" content="https://java2ee.com/image/java2ee-logo.PNG">
         
        <meta property="article:published_time" content="2024-08-09T02:59:35+00:00">
        <meta property="article:modified_time" content="2024-08-09T02:59:35+00:00">
        <meta property="og:updated_time" content="2024-08-09T02:59:35+00:00">
    </head>
    <body>      
        <div class="d-flex" id="wrapper">
            <div id="page-content-wrapper">
            <div id="right-main-div">
                <div class="left-main-div" id="left-main-div">
                    <h1 class="main-heading">Spring Boot With Redis Without Database</h1>  
                    
                    <h2 class="main-heading">What is Redis?</h2></a></li>                       
                    <p><b>Redis</b> stands for <b>Remote Dictionary Server</b>. It is an open source NoSQL database.
                        It doesn’t have any tables, rows and columns. Also, it doesn’t allow statements like select 
                        statement, insert statements, update statements etc.
                    </p>
                    <p>
                        It stores objects using key/value and basically used to cache and quick-response in an application 
                        to speed or increase performance.
                    </p>
                    <p>Various ways of Redis</p>
                    <ol class="num-list-ol">
                        <li class="num-list">In-Memory Database</li>
                        <li class="num-list">Cache</li>
                    </ol>

                    <h2 class="main-heading">In-Memory Database</h2>                       
                    <p>
                        <b>In-Memory Database(IMDS)</b> enables minimal response times. It provides responses in microsecond of times. 
                            It is the good choice for the application if an application handles the large numbers of traffic.
                    </p>
                    <p>Advantages:<br>
                        <ol class="num-list-ol">
                            <li class="num-list">Low latency - provides real time responses</li>
                            <li class="num-list">High throughput</li>
                            <li class="num-list">High scalability</li>
                        </ol>
                    </p>
                        

                    <h2 class="main-heading">Cache</h2>
                    <p>The <b>cache</b> provides data quickly with high latency to increase the data retrieval performance. 
                        Redis is the good choice for caching API calls, session states, and 
                        database queries etc.
                    </p>
                    <p>Advantages:<br>
                        <ol class="num-list-ol">
                            <li class="num-list">High latency - provides data quickly and increase performance.</li>
                            <li class="num-list">Faster access to cached data.</li>
                            <li class="num-list">Response time is faster because data is retrieved from memory.</li>
                        </ol>
                    </p>
                        

                    <h2 class="main-heading">How Redis Works?</h2>
                    <p>When a request comes, the code of logic checks in the Redis cache for the desired 
                        data. If appropriate data is available in the redis cache, logic simply returns the 
                            data from redis cache.
                    </p>
                    <p>If the requested data is not available/found in the redis cache, the logic 
                            falls back to the database or original data source to retrieve the required information 
                            to return required data. Subsequently, the fetched data is stored in the Redis cache. 
                    </p>   
                        
                    <h2 class="main-heading">Spring Boot with Redis Configuration</h2>                  
                    <p>
                        <ol>
                            <li class="num-list">
                                First, you need to run redis on your local machine.                              
                            </li>
                            <dd>
                                - Create a <b>docker-compose.yaml</b> file in the root directory in your application.<br>
                                - Copy the below code and paste into docker-compose.yaml.<br>
                                - Open command prompt and go to the directory where you have created docker-compose.yaml file.<br>
                                - Run command as <b>docker compose up</b> in the command prompt.<br>
                               <br> <b>docker-compose.yaml</b> file
<pre><code>version: '3.7'
services:
    redis:
    image: redis
    volumes:
    - ./data:/data
    ports:
    - "6379:6379"</code></pre>
                            </dd>
                            <li class="num-list">
                                Below dependencies are required in spring boot application.
                            </li>
                            <dd><p>
<pre>
    
<code><</code><code>dependency>
  <</code><code>groupId> org.springframework.boot <</code><code>/groupId>
  <</code><code>artifactId> spring-boot-starter-data-redis <</code><code>/artifactId>
<</code><code>/dependency></code>

<code><</code><code>dependency>
    <</code><code>groupId> org.springframework.boot <</code><code>/groupId>
    <</code><code>artifactId> spring-boot-starter-cache <</code><code>/artifactId>
<</code><code>/dependency></code>

</pre>
                            </p></dd>
                            <li class="num-list">
                                Need to add <b>@EnableCaching</b> annotation in the main class. Also create bean of 
                                <b>cacheConfiguration</b> as per below example.
                            </li>
                            <dd><p>
<pre><code>import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.cache.annotation.EnableCaching;
import org.springframework.context.annotation.Bean;
import org.springframework.data.redis.cache.RedisCacheConfiguration;
import org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer;
import org.springframework.data.redis.serializer.RedisSerializationContext;
import java.time.Duration;
    
@SpringBootApplication
@EnableCaching <span class="red">// Annotation need to declare</span>
public class SpringBootMainApplication {

    public static void main(String[] args) {
        SpringApplication.run(SpringBootMainApplication.class, args);
    }

    <span class="red">//Need to add below bean</span>
    @Bean
    public RedisCacheConfiguration cacheConfiguration() {
        return RedisCacheConfiguration
                .defaultCacheConfig()
                <span class="red">//Cache Expiry time</span>
                .entryTtl(Duration.ofMinutes(60))
                .serializeValuesWith(RedisSerializationContext
                        .SerializationPair
                        .fromSerializer( new GenericJackson2JsonRedisSerializer() ));
    }
}
</code></pre>
                            </p></dd>

                            <li class="num-list">
                               Create POJO class
                            </li>
                            <dd><p>
<pre><code>import java.io.Serializable;

    @Data
    @NoArgsConstructor
    @AllArgsConstructor
    public class Book implements Serializable {
    
        private Integer bookId;
        private String bookName;
    
    }
</code></pre>
                            </p></dd>

                            <li class="num-list">
                                Create Service class
                             </li>
                             <dd><p>
 <pre><code>import com.entity.Book;
import org.springframework.cache.annotation.CacheConfig;
import org.springframework.cache.annotation.CacheEvict;
import org.springframework.cache.annotation.CachePut;
import org.springframework.cache.annotation.Cacheable;
import org.springframework.stereotype.Service;

import java.util.ArrayList;
import java.util.List;
import java.util.Optional;

@Service
@CacheConfig(cacheNames = "book")
public class BookService {

    private static List<Book> bookList=new ArrayList<Book>();
    static{
        bookList.add(new Book(1, "Sample Book1"));
        bookList.add(new Book(2, "Sample Book2"));
        bookList.add(new Book(3, "Sample Book3"));
        bookList.add(new Book(4, "Sample Book4"));
        bookList.add(new Book(5, "Sample Book5"));
        bookList.add(new Book(6, "Sample Book6"));
    }

    @Cacheable(value = "Book", key = "#id", condition="#id!=null")
    public Book findById(Integer id) {
        System.out.println("Fetching book");
        return getBookbyId(id);
    }

    @CachePut(cacheNames = "Book", key = "#id")
    public void updateBook(Book post) {
        // updatebook();
    }
    @CacheEvict(cacheNames = "Book", key = "#id", beforeInvocation = true)
    public void deleteById(Integer bookId) {
        // delete book
    }

    private Book getBookbyId(Integer bookId){
        System.out.println("Finding book");
        Optional<Book> book = bookList
                    .stream()
                    .filter(b -> b.getBookId()==bookId)
                .findFirst();

        return book.get();
    }
}
 </code></pre>
                             </p></dd>

                             <li class="num-list">
                                Create Controller class
                             </li>
                             <dd><p>
 <pre><code>import com.entity.Book;
import com.inventory.service.impl.BookService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;

@RestController
@RequestMapping(path="/api")

public class BookController {

    @Autowired
    BookService service;

    @GetMapping("/books/{id}")
    public @ResponseBody Book findById(@PathVariable("id") Integer postId) {
        return service.findById(postId);
    }

    @PostMapping("/updatepost")
    public void updatePost(Book post) {
        service.updateBook(post);
    }

    @DeleteMapping("/posts/{id}")
    public void deleteById(@PathVariable("id") Integer postId) {
        service.deleteById(postId);
    }
}
 </code></pre>
                             </p></dd>


                             <li class="num-list">
                                Cache Testing with POSTMAN
                             </li>
                             <dd>
                                <p>
                                    Start the Spring Boot Application and hit the GET URL on POSTMAN.
                                    You can see that <b>"Finding book"</b> will be prited once time only if you hit the URL multiple times with 
                                    the same ID.<br>
                                    The cached will be removed automatically after 60 minutes as the <b>ttl</b> time is configured with 60 minutes
                                    in the bean of cacheConfiguration.

                                    <br>
                                    <img id="spribg-boot-redis-in-java" src="image/Ehcache.PNG" title="Spring Boot Redis in Java" style="width:90%;"><div class="image-text" style="width:100%;text-align: center;">Spring Boot Redis In Java</div></image>
                                    <br>
                                </p>
                        </dd>
                                    </p>  
                                </p> 

      
                    </div>
            </div>          
        </div>     
    <div class="cookie-consent">      
            By using our site, you acknowledge that you have read and understood our
            <a href="https://java2ee.com/Cookies Policy" ><u>Cookie Policy</u></a> &amp;
            <a href="https://java2ee.com/termandpolicy" ><u>Privacy Policy</u></a> &nbsp;&nbsp; | &nbsp;&nbsp;
            <a href="https://java2ee.com/contactus" ><u>Contact Us</u></a>  
    </div>		 
        <script>
            window.addEventListener("load", (event) => {               
                if(document.getElementById('right-adv')!=0){
                    var height = document.getElementById('left-main-div').clientHeight;//$("#left-main-div").height();
                    if(height>300){
                        height=height-117;
                    }
                    document.getElementById('right-adv').setAttribute("style","height:"+height+"px");
                }  
            });   
        </script>
    </body>
</html>
